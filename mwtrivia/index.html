<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Morgan Wallen Trivia</title>
  <link rel="stylesheet" href="./assets/style.css?v=5" />
</head>
<body class="mwtrivia">
  <div class="wrap">
    <header class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>Morgan Wallen Trivia</h1>
          <div class="muted">Pick a mode to start</div>
        </div>
      </div>

      <div class="controls">
        <label class="pill">
          Scope
          <select id="scopeSelect" class="select">
            <option value="albums">Albums only</option>
            <option value="all">Everything</option>
          </select>
        </label>

        <!-- Attempts badge that your JS updates via updateAttemptsBadge() -->
        <div id="attemptsBadge" class="pill badge hidden" aria-live="polite">Attempts left: 3</div>

        <!-- DO NOT COMMENT THIS OUT: your JS attaches a listener to it -->
        <button id="btnTogglePersist" class="btn ghost" title="Toggle session vs. local storage">
          Use Local Storage
        </button>
      </div>
    </header>

    <!-- Mode gate -->
    <section id="modeGate" class="modes">
      <div class="modecard" data-mode="super-rare">
        <div class="mode-tag">Mode 1</div>
        <h3>Super Rare Words</h3>
        <p>Words that appear in <b>only one song</b>.</p>
        <button class="btn primary">Play</button>
      </div>

      <div class="modecard" data-mode="rare">
        <div class="mode-tag">Mode 2</div>
        <h3>Rare Words</h3>
        <p>Words that appear <b>fewer than 10 times</b> globally.</p>
        <button class="btn primary">Play</button>
      </div>

      <div class="modecard" data-mode="audio">
        <div class="mode-tag">Mode 3</div>
        <h3>Guess the Song</h3>
        <p>Hear a random track and guess it fast.</p>
        <button class="btn primary">Play</button>
      </div>
    </section>

    <!-- Score bubble shows current game total -->
    <section class="scorebar hidden" id="scoreBar">
      <div class="score-bubble">
        <div class="score-label" id="modeLabel">Mode</div>
        <div class="score-value" id="scoreBubbleBest">0</div>
        <div class="score-sub">Game Score</div>
      </div>
    </section>

    <!-- Main game container -->
    <main id="gameUI" class="grid hidden">
      <!-- ===== Text-based modes card (existing) ===== -->
      <section class="card" id="gameCard">
        <div class="roundhead">
          <div id="roundLabel" class="roundtag">Round 1 of 3</div>
          <div id="wordLabel" class="muted tiny">Word 1 / 10</div>
        </div>

        <h3 id="gameTitle">Least-Used Word</h3>

        <div class="wordbox" id="wordBox"><span id="wordSpan">—</span></div>
        <div class="muted hint">
          Appears <span id="countInSong">0</span>× in the song, <span id="countGlobal">0</span>× across all songs
        </div>

        <div class="spacer"></div>
        <div class="muted">Guess the song:</div>
        <div class="searchwrap">
          <input id="songSearch" class="input search" placeholder="Type to search songs…" autocomplete="off" />
          <div id="results" class="results hidden"></div>
        </div>

        <div class="row">
          <button id="btnSubmit" class="btn primary" disabled>Submit</button>
          <button id="btnReveal" class="btn ghost">Reveal</button>
          <button id="btnNext" class="btn" disabled>Next</button>
        </div>

        <div id="guessFeedback" class="muted feedback"></div>
      </section>

      <!-- ===== Audio mode card (hidden until Mode 3 Play) ===== -->
      <section class="card hidden" id="audioUI" aria-labelledby="audioTitle">
        <h3 id="audioTitle">Guess the Song</h3>

        <div class="row">
          <button id="btnSpotifyConnect" class="btn ghost" type="button">Connect Spotify</button>
          <button id="btnAudioStart" class="btn primary" type="button">Start</button>
          <div id="audioTimer" class="muted" aria-live="polite">0:00.0</div>
        </div>

        <div id="audioStatus" class="muted tiny"></div>

        <!-- JS may use SDK player (no iframe needed) or inject an iframe here if you change approach -->
        <div id="spotifyPlayerContainer" class="player-slot" aria-hidden="true"></div>

        <div class="spacer"></div>
        <div class="muted">Search &amp; submit your guess:</div>
        <div class="searchwrap">
          <input id="audioSongSearch" class="input search" placeholder="Type the song name…" autocomplete="off" />
          <div id="audioResults" class="results hidden"></div>
        </div>

        <div class="row">
          <button id="btnAudioSubmit" class="btn primary" type="button" disabled>Submit Guess</button>
          <div id="audioAttemptsBadge" class="pill badge">Attempts left: 3</div>
        </div>

        <div id="audioFeedback" class="muted feedback"></div>
      </section>
    </main>

    <!-- Round summary overlay -->
    <section id="roundSummary" class="overlay hidden">
      <div class="overlay-card">
        <h3 id="roundSummaryTitle">Round 1 Complete</h3>
        <p class="muted" id="roundSummaryDesc">You scored 0 points this round.</p>
        <div id="roundBreakdown" class="list"></div>
        <div class="row">
          <button id="btnNextRound" class="btn primary">Start Next Round</button>
        </div>
      </div>
    </section>

    <!-- Game over screen -->
    <section id="gameOver" class="overlay hidden">
      <div class="overlay-card">
        <h2>Game Over</h2>
        <p class="muted" id="goModeScope"></p>
        <div id="goRounds" class="list"></div>
        <div class="totalbox">Total Score: <b id="goTotal">0</b></div>
        <div class="row">
          <button id="btnDownloadImage" class="btn primary">Download Score Image</button>
          <button id="btnPlayAgain" class="btn">Play Again</button>
        </div>
      </div>
    </section>

    <footer class="footer tiny">
      <span>© For fun — not affiliated with or endorsed by Morgan Wallen.</span>
    </footer>
  </div>

  <!-- Confetti overlay -->
  <div id="confettiLayer" class="confetti hidden" aria-hidden="true"></div>

  <!-- Spotify Web Playback SDK: your JS waits for window.Spotify -->
  <script src="https://sdk.scdn.co/spotify-player.js"></script>

  <!-- Your app logic -->
  <script src="./js/app.js?v=5"></script>
</body>
</html>
